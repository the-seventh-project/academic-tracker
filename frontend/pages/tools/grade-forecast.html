<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Course Component Forecast</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/style.css">
</head>

<body>
    <nav class="navbar navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="../dashboard/student.html">‚Üê Back to Dashboard</a>
            <div>
                <button class="btn btn-outline-light btn-sm" onclick="logout()">Logout</button>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <h2 class="mb-1 text-center" style="font-size: 40px; margin-top: 50px; font-weight: bold; color: white;">Course
            Performance
            Forecast</h2>
        <p class="mb-3 text-center" style="font-size: 15px; color: white; margin-top: 5px;">Simulate assessment grades
            and determine
            minimum marks needed to achieve your target final grade.</p>

        <!-- 1. Course Information -->
        <div class="card shadow mb-3" style="margin-top: 50px;">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Course Information</h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label for="courseName" class="form-label">Course Name</label>
                        <input type="text" class="form-control" id="courseName"
                            placeholder="e.g., Introduction to Programming">
                    </div>
                    <div class="col-md-6">
                        <label for="courseCode" class="form-label">Course Code</label>
                        <input type="text" class="form-control" id="courseCode" placeholder="e.g., CS101">
                    </div>
                    <div class="col-md-6">
                        <label for="credits" class="form-label">Credits</label>
                        <input type="number" step="0.5" class="form-control" id="credits" placeholder="e.g., 3" min="0"
                            max="5" oninput="if(this.value > 5) this.value = 5; if(this.value < 0) this.value = 0;"
                            onkeypress="return (event.charCode >= 48 && event.charCode <= 57) || event.charCode == 46;">
                    </div>
                    <div class="col-md-6">
                        <label for="semester" class="form-label">Semester</label>
                        <select class="form-control" id="semester">
                            <option value="">Select Semester</option>
                            <option value="Spring 2025">Spring 2025</option>
                            <option value="Summer 2025">Summer 2025</option>
                            <option value="Fall 2025">Fall 2025</option>
                            <option value="Winter 2025">Winter 2025</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Editable Course Components (Assessments) -->
        <div class="card shadow mb-3 my-courses-card">
            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Course Components</h5>
                <div class="d-flex align-items-center gap-2">
                    <span class="badge bg-light text-dark py-2 px-3" id="totalWeightBadge"
                        style="font-size: 0.875rem;">Total Weight: 0%</span>
                    <div class="what-if-toggle-container d-flex align-items-center">
                        <label class="switch mb-0">
                            <input type="checkbox" id="whatIfToggle">
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label ms-2" style="font-size: 0.875rem;">Trends</span>
                    </div>
                    <button id="addAssessmentBtn" class="btn btn-light btn-sm">+ Add Assessment</button>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover" id="assessmentTable">
                        <thead>
                            <tr>
                                <th>Assessment Name</th>
                                <th>Assessment Type</th>
                                <th class="text-center">Weight (%)</th>
                                <th class="text-center">Hypothetical Mark</th>
                                <th class="text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="assessmentBody">
                            <tr>
                                <td colspan="5" class="text-center">No assessments added. Click "+ Add Assessment" to
                                    begin.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-3 d-flex gap-2 align-items-center">
                    <div class="me-auto d-flex align-items-center gap-2">
                        <label for="targetGrade" class="col-form-label mb-0">Target Final Grade (%)</label>
                        <input id="targetGrade" type="number" step="0.01" min="0" max="100"
                            class="form-control form-control-sm" placeholder="e.g., 85" style="width:100px;">
                    </div>
                    <div class="d-flex gap-2">
                        <button id="runAnalysisBtn" class="btn btn-primary">Run Analysis</button>
                        <button id="resetBtn" class="btn btn-secondary">Reset Inputs</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Container -->
        <div id="resultsContainer" class="mt-3" style="display:none;">
            <div class="card shadow mb-3">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">Projected Course Breakdown</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-sm table-striped">
                            <thead>
                                <tr>
                                    <th>Assessment Name</th>
                                    <th class="text-center">Type</th>
                                    <th class="text-center">Weight (%)</th>
                                    <th class="text-center">Hypothetical Mark</th>
                                    <th class="text-center">Minimum Required (Weighted)</th>
                                    <th class="text-center">Minimum Required (%)</th>
                                </tr>
                            </thead>
                            <tbody id="resultsBody">
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-3">
                        <p class="mb-1"><strong>Target Final Grade:</strong> <span id="displayTargetGrade">-</span>%</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Core Scripts -->
    <script src="../../js/core/config.js"></script>
    <script src="../../js/core/api.js"></script>
    <script src="../../js/core/auth.js"></script>

    <!-- Services & Components -->
    <script src="../../js/services/configService.js"></script>
    <script src="../../js/services/forecastService.js"></script>
    <script src="../../js/components/AssessmentTable.js"></script>

    <!-- Page Script -->
    <script src="../../js/pages/tools/grade-forecast.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <footer style="margin-top: 50px; text-align: center;">
        &copy; 2025 GPA Calculator | Course Performance Forecast
    </footer>

</body>

</html>